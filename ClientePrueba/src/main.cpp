#include <SDL2/SDL.h>
#include <SDL2/SDL_image.h>
#include <iostream>
#include <unistd.h>
#include "Game.h"
#include "Menu.h"
#include "SDL_EventHandler.h"

std::vector<std::vector<int>> lvl1 = {
	{434,434,434,434,434,434,434,434,434,434,434,434,434,434,434,434,434,434,434,434},
	{434,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,434},
	{434,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,434},
	{434,435,449,435,435,449,435,435,000,000,000,000,000,103,000,000,000,000,000,434},
	{434,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,434},
	{434,000,000,000,000,000,000,000,000,000,000,000,000,104,000,000,000,000,000,434},
	{434,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,434},
	{434,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,434},
	{434,434,434,434,434,434,000,000,434,434,434,434,000,000,000,000,000,434,434,434},
	{434,000,000,000,000,000,000,000,434,434,000,000,000,000,000,000,000,000,000,434},
	{434,000,000,000,000,000,000,000,434,434,000,000,000,000,301,301,000,000,000,434},
	{434,000,204,204,000,000,000,000,434,434,000,000,000,000,301,301,000,000,000,434},
	{434,000,204,204,000,000,000,000,434,434,000,000,000,000,301,301,000,000,000,434},
	{434,000,000,000,000,000,000,000,434,434,000,000,000,000,000,000,000,000,000,434},
	{434,434,434,434,434,434,434,434,434,434,434,434,434,434,434,434,434,434,434,434},
};

//  std::vector<std::vector<int>> lvl1 = {
// 	{404,404,404,404,404,404,404,404,404},
// 	{404,000,000,000,000,000,000,000,404},
// 	{404,000,000,104,000,000,000,000,404},
// 	{404,000,000,103,000,301,000,000,404},
// 	{404,000,000,000,000,000,000,000,404},
// 	{404,000,217,204,000,404,000,000,404},
// 	{404,000,000,000,000,000,000,000,404},
// 	{404,404,404,404,404,404,404,404,404}
// };

//  std::vector<std::vector<int>> lvl1 = {
// 	{434,434,434,434,434,434,434,434,434},
// 	{434,000,104,000,000,000,000,000,434},
// 	{434,000,103,434,434,434,434,000,434},
// 	{434,000,000,000,000,000,000,000,434},
// 	{434,434,434,434,434,401,000,000,434},
// 	{434,000,000,000,000,000,000,000,434},
// 	{434,000,000,000,000,000,000,000,434},
// 	{434,434,434,434,434,434,434,434,434}
// };


int main(int argc, char* argv[]){	
	Menu menu;

	while (!menu.quitGame() && !menu.createGame() && !menu.joinGame()){
		menu.pollEvent();
		menu.render();
		sleep (1/60);
	}
	if (menu.quitGame()){
		return 0;
	}
	
	Game game(640, 480, lvl1);
	SDL_EventHandler eventHandler;
	event_t event;
	//game.setFullScreen();

	while (!game.isGameOver()){
		event=eventHandler.pollEvent();
		game.receiveEvent(event);
		// game.pollEvent();
		game.render();
		// SDL_Delay(60);
		sleep(1/60);
	}
	std::cout<<"chau main"<<std::endl;
	return 0;
}
